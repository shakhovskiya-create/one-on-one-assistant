# 1-on-1 Assistant

Инструмент для проведения и анализа встреч 1-на-1 с сотрудниками.

## Возможности

- **Интерактивный скрипт встречи** - чеклист с таймером для проведения встречи
- **Автоматическая транскрипция** - загрузите аудио/видео, получите текст
- **AI-анализ** - автоматическое заполнение протокола, выделение договоренностей
- **Красные флаги** - обнаружение признаков выгорания и риска ухода
- **Аналитика** - динамика настроения, статистика договоренностей
- **История** - все встречи и договоренности в одном месте

## Быстрый старт

### 1. Создайте аккаунты и получите ключи

#### Supabase (бесплатно)
1. Зарегистрируйтесь на [supabase.com](https://supabase.com)
2. Создайте новый проект
3. Перейдите в Settings → API и скопируйте:
   - Project URL → `SUPABASE_URL`
   - anon public key → `SUPABASE_KEY`
4. Перейдите в SQL Editor и выполните содержимое файла `backend/schema.sql`

#### OpenAI (для транскрипции)
1. Зарегистрируйтесь на [platform.openai.com](https://platform.openai.com)
2. Создайте API ключ → `OPENAI_API_KEY`
3. Пополните баланс (минимум $5)

#### Anthropic (для анализа)
1. Зарегистрируйтесь на [console.anthropic.com](https://console.anthropic.com)
2. Создайте API ключ → `ANTHROPIC_API_KEY`
3. Пополните баланс (минимум $5)

### 2. Настройте проект

```bash
# Клонируйте или скопируйте проект
cd one-on-one-assistant

# Создайте файл с переменными окружения
cp .env.example .env

# Отредактируйте .env и добавьте ваши ключи
nano .env
```

### 3. Запуск через Docker (рекомендуется)

```bash
docker-compose up -d
```

Приложение будет доступно:
- Frontend: http://localhost:3000
- Backend API: http://localhost:8000

### 4. Запуск без Docker

#### Backend
```bash
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
uvicorn main:app --reload
```

#### Frontend
```bash
cd frontend
npm install
npm run dev
```

## Использование

### 1. Добавьте сотрудников
Перейдите в раздел "Команда" и добавьте ваших подчиненных.

### 2. Проведите встречу
Используйте раздел "Скрипт встречи":
- Выберите сотрудника
- Запустите таймер
- Следуйте скрипту, отмечая пройденные вопросы
- Делайте заметки по ходу

### 3. Загрузите запись
После встречи:
- Перейдите в "Загрузить запись"
- Выберите сотрудника и дату
- Загрузите аудио или видео файл
- Дождитесь анализа (1-3 минуты)

### 4. Изучите результаты
Система автоматически:
- Создаст транскрипт
- Заполнит протокол встречи
- Выделит договоренности с дедлайнами
- Оценит настроение сотрудника
- Обнаружит красные флаги
- Даст рекомендации

### 5. Отслеживайте динамику
В разделе "Аналитика" смотрите:
- График настроения по времени
- Статистику выполнения договоренностей
- Историю красных флагов

## Структура проекта

```
one-on-one-assistant/
├── backend/
│   ├── main.py           # FastAPI приложение
│   ├── schema.sql        # SQL схема для Supabase
│   ├── requirements.txt  # Python зависимости
│   └── Dockerfile
├── frontend/
│   ├── app/              # Next.js страницы
│   │   ├── page.tsx      # Дашборд
│   │   ├── script/       # Скрипт встречи
│   │   ├── upload/       # Загрузка записей
│   │   ├── employees/    # Управление командой
│   │   ├── meetings/     # История встреч
│   │   └── analytics/    # Аналитика
│   ├── package.json
│   └── Dockerfile
├── docker-compose.yml
├── .env.example
└── README.md
```

## API Endpoints

| Метод | Endpoint | Описание |
|-------|----------|----------|
| GET | /script | Получить скрипт встречи |
| GET | /employees | Список сотрудников |
| POST | /employees | Добавить сотрудника |
| GET | /meetings | Список встреч |
| POST | /transcribe | Транскрибировать аудио |
| POST | /analyze | Анализировать транскрипт |
| POST | /process-meeting | Полный пайплайн обработки |
| GET | /analytics/employee/{id} | Аналитика по сотруднику |
| GET | /analytics/dashboard | Общая аналитика |

## Стоимость

Примерная стоимость на 20 встреч в месяц (по 60 минут):

| Сервис | Стоимость |
|--------|-----------|
| Whisper API | ~$7 |
| Claude API | ~$3 |
| Supabase | $0 (free tier) |
| **Итого** | **~$10/месяц** |

## Roadmap (Фаза 2-3)

### Выполнено
- [x] Интеграция с AD (синхронизация сотрудников с оргструктурой)
- [x] On-prem коннектор для AD/Exchange (WebSocket → Railway)

### В работе
- [ ] **Интеграция с Exchange/Outlook**
  - Полная синхронизация календаря
  - Автоматическое определение участников встречи из Exchange
  - Планирование встреч как в новом Outlook
  - Привязка задач к встречам

- [ ] **Авторизация с оргструктурой**
  - Вход через AD (LDAP/NTLM)
  - Сотрудник видит только своих подчинённых
  - Иерархия доступа на основе manager_id

- [ ] **Досье сотрудника**
  - Красиво оформленная карточка
  - Все встречи с сотрудником
  - История договорённостей
  - Аналитика настроения
  - Красные флаги

- [ ] **Аналитика по категориям встреч**
  - Для каждой категории (1-на-1, ретро, планирование и т.д.) своя аналитика
  - Узконаправленные метрики и инсайты

### Позже
- [ ] Email-уведомления о просроченных договоренностях
- [ ] Экспорт отчетов в PDF/Excel
- [ ] Сравнительный анализ по команде
- [ ] Десктоп-версия (Electron)

## Поддержка

При возникновении проблем:
1. Проверьте правильность API ключей в .env
2. Убедитесь, что выполнили SQL схему в Supabase
3. Проверьте баланс на OpenAI и Anthropic

## Лицензия

MIT
