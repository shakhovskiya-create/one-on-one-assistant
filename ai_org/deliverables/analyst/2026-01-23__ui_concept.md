# UI/UX Концепция EKF Hub

## Содержание
1. [Задачи (Task Management)](#1-задачи-task-management)
2. [Service Desk (ITIL)](#2-service-desk-itil)
3. [Встречи (Meetings)](#3-встречи-meetings)
4. [Навигация](#4-навигация)

---

# 1. Задачи (Task Management)1

## 1.1 Философия дизайна

**Принцип**: Единая точка входа для всей работы с задачами. Проекты, спринты, релизы — это фильтры и группировки, а не отдельные разделы.

**Референсы**: Jira, Linear, Notion

## 1.2 Информационная архитектура

```
/tasks
├── Левая панель (240px, collapsible)
│   ├── Быстрые фильтры
│   │   ├── Мои задачи
│   │   ├── Назначенные мной
│   │   └── Наблюдаемые
│   ├── Проекты (tree)
│   │   ├── EKF Hub
│   │   ├── CRM
│   │   └── [+ Новый проект]
│   ├── Спринты
│   │   ├── ● Sprint 9 (активный)
│   │   ├── ○ Sprint 8
│   │   └── ○ Backlog
│   ├── Релизы
│   │   ├── v2.1.0 (unreleased)
│   │   ├── v2.0.0 (released)
│   │   └── [+ Новый релиз]
│   └── Метки (tags)
│
├── Центральная область
│   ├── Toolbar
│   │   ├── Поиск
│   │   ├── [+ Создать]
│   │   ├── View switcher: [Board | List | Timeline]
│   │   └── Фильтры: Статус, Приоритет, Исполнитель
│   │
│   └── Content Area
│       ├── Board View (Kanban)
│       ├── List View (Table)
│       └── Timeline View (Gantt-like)
│
└── Правая панель (детали задачи, 400px, slide-in)
```

## 1.3 Workflow для Департамента Цифрового Развития

### Статусы (настраиваемые по департаменту)

| Статус | Цвет | Описание | Роль |
|--------|------|----------|------|
| Backlog | Gray | Новые задачи | PM |
| Анализ | Blue | Сбор требований, ТЗ | Аналитик |
| Разработка | Yellow | Написание кода | Разработчик |
| Code Review | Orange | Ревью PR | Senior/Lead |
| Тестирование | Purple | QA проверка | Тестировщик |
| UAT | Pink | Приёмочное тестирование | Заказчик |
| Ready for Release | Green | Готово к деплою | DevOps |
| Done | Dark Green | Задеплоено | - |

### Переходы между статусами

```
Backlog ─────────► Анализ
                      │
                      ▼
                 Разработка ◄─────┐
                      │           │
                      ▼           │
                 Code Review ─────┘ (Reject)
                      │
                      ▼ (Approve)
                 Тестирование ◄───┐
                      │           │
                      ▼           │
                    UAT ──────────┘ (Bug found)
                      │
                      ▼ (Approve)
              Ready for Release
                      │
                      ▼
                    Done
```

## 1.4 Компоненты UI

### 1.4.1 Board View (Kanban)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ ЗАДАЧИ                                                                      │
│                                                                             │
│ 🔍 Поиск задач...    [+ Создать]    [Board ▼] [List] [Timeline]            │
│                                                                             │
│ Фильтры: [Все статусы ▼] [Все приоритеты ▼] [Исполнитель ▼] [Ещё...]      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─ Backlog (12) ──┐ ┌─ Анализ (3) ───┐ ┌─ Разработка (5) ┐ ┌─ Тест (2) ──┐│
│  │ ┌─────────────┐ │ │ ┌─────────────┐│ │ ┌─────────────┐ │ │ ┌──────────┐││
│  │ │🟢 EKF-234   │ │ │ │🔵 EKF-201  ││ │ │🟡 EKF-189   │ │ │ │🟣 EKF-156│││
│  │ │             │ │ │ │             ││ │ │             │ │ │ │          │││
│  │ │Авторизация  │ │ │ │API для     ││ │ │Dashboard    │ │ │ │Checkout  │││
│  │ │через SSO    │ │ │ │отчётов     ││ │ │виджеты      │ │ │ │flow      │││
│  │ │             │ │ │ │             ││ │ │             │ │ │ │          │││
│  │ │👤 Иванов    │ │ │ │👤 Петров   ││ │ │👤 Сидоров   │ │ │ │👤 QA Team│││
│  │ │📅 25 янв    │ │ │ │🏷️ backend  ││ │ │⏱️ 5 SP      │ │ │ │🔴 High   │││
│  │ └─────────────┘ │ │ └─────────────┘│ │ └─────────────┘ │ │ └──────────┘││
│  │                 │ │                │ │                 │ │             ││
│  │ ┌─────────────┐ │ │                │ │ ┌─────────────┐ │ │             ││
│  │ │🔴 EKF-235   │ │ │                │ │ │🟢 EKF-190   │ │ │             ││
│  │ │Bug: Login   │ │ │                │ │ │Рефакторинг  │ │ │             ││
│  │ │не работает  │ │ │                │ │ │auth модуля  │ │ │             ││
│  │ └─────────────┘ │ │                │ │ └─────────────┘ │ │             ││
│  └─────────────────┘ └────────────────┘ └─────────────────┘ └─────────────┘│
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 1.4.2 Task Card (в доске)

```
┌───────────────────────────────────┐
│ 🟢 EKF-234                    ⋮  │  ← Тип + ID + Меню
│                                   │
│ Реализовать авторизацию          │  ← Название (max 2 строки)
│ через SSO                         │
│                                   │
│ ┌─────┐ ┌─────┐ ┌─────┐          │  ← Теги
│ │auth │ │sso  │ │ldap │          │
│ └─────┘ └─────┘ └─────┘          │
│                                   │
│ 👤 Иванов И.  ⏱️ 5 SP  📅 25 янв │  ← Исполнитель, SP, Дедлайн
│                                   │
│ ████████░░ 80%                   │  ← Прогресс (подзадачи)
│                                   │
│ 💬 3  📎 2  🔗 1                  │  ← Комментарии, Вложения, Связи
└───────────────────────────────────┘
```

### 1.4.3 Task Detail Panel (правая панель)

```
┌─────────────────────────────────────────────────────────────────┐
│ ← Закрыть                                              [⋮ Ещё] │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│ 🟢 STORY  EKF-234                                              │
│                                                                 │
│ ┌─────────────────────────────────────────────────────────────┐│
│ │ Реализовать авторизацию через SSO                          ││
│ │ [Нажмите для редактирования]                               ││
│ └─────────────────────────────────────────────────────────────┘│
│                                                                 │
│ ┌─ Статус ─────────────────────────────────────────────────── │
│ │  [🟡 Разработка ▼]  ──────────────────────────► [🟣 Тест]  ││
│ └─────────────────────────────────────────────────────────────┘│
│                                                                 │
│ ┌─ Основные поля ─────────────────────────────────────────────┐│
│ │                                                             ││
│ │ Исполнитель      │ Ревьюер         │ Тестировщик           ││
│ │ 👤 Иванов И. ▼   │ 👤 Петров П. ▼  │ 👤 QA Team ▼          ││
│ │                  │                 │                        ││
│ │ Проект           │ Спринт          │ Релиз                  ││
│ │ 📁 EKF Hub ▼     │ 🏃 Sprint 9 ▼   │ 📦 v2.1.0 ▼           ││
│ │                  │                 │                        ││
│ │ Приоритет        │ Story Points    │ Дедлайн                ││
│ │ 🔴 Высокий ▼     │ [5] ▼           │ 📅 25.01.2026         ││
│ │                  │                 │                        ││
│ └─────────────────────────────────────────────────────────────┘│
│                                                                 │
│ ┌─ Описание ──────────────────────────────────────────────────┐│
│ │                                                             ││
│ │ ## Цель                                                     ││
│ │ Реализовать Single Sign-On через корпоративный LDAP.       ││
│ │                                                             ││
│ │ ## Acceptance Criteria                                      ││
│ │ - [ ] Пользователь может войти через SSO                   ││
│ │ - [ ] Сессия синхронизируется с AD                         ││
│ │ - [ ] Автоматический logout при блокировке в AD            ││
│ │                                                             ││
│ │ [✏️ Редактировать]                                          ││
│ └─────────────────────────────────────────────────────────────┘│
│                                                                 │
│ ┌─ Вкладки ───────────────────────────────────────────────────┐│
│ │ [Подзадачи] [Связи] [Время] [GitHub] [История] [Файлы]     ││
│ ├─────────────────────────────────────────────────────────────┤│
│ │                                                             ││
│ │ ☑ Написать unit тесты (2h)                     👤 Иванов   ││
│ │ ☐ Code review                                  👤 Петров   ││
│ │ ☐ Обновить документацию                        👤 ---      ││
│ │                                                             ││
│ │ [+ Добавить подзадачу]                                     ││
│ │                                                             ││
│ └─────────────────────────────────────────────────────────────┘│
│                                                                 │
│ ┌─ Комментарии ───────────────────────────────────────────────┐│
│ │                                                             ││
│ │ 👤 Иванов И. • 2 часа назад                                ││
│ │ Готово к ревью. PR: #234                                   ││
│ │                                                             ││
│ │ 👤 Петров П. • 1 час назад                                 ││
│ │ Есть замечания по обработке ошибок, см. комментарии в PR   ││
│ │                                                             ││
│ │ ┌─────────────────────────────────────────────────────────┐││
│ │ │ Написать комментарий...                                 │││
│ │ └─────────────────────────────────────────────────────────┘││
│ │                                          [Отправить]       ││
│ └─────────────────────────────────────────────────────────────┘│
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 1.4.4 Create Task Modal

```
┌─────────────────────────────────────────────────────────────────┐
│ Создать задачу                                          [✕]    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│ Тип задачи                                                      │
│ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐   │
│ │ 🟣 Epic │ │ 🟢Story │ │ 🔵 Task │ │ 🔴 Bug  │ │ ⚪ Sub  │   │
│ └─────────┘ └─────────┘ └─────────┘ └─────────┘ └─────────┘   │
│     [●]         [ ]         [ ]         [ ]         [ ]        │
│                                                                 │
│ Название *                                                      │
│ ┌─────────────────────────────────────────────────────────────┐│
│ │                                                             ││
│ └─────────────────────────────────────────────────────────────┘│
│                                                                 │
│ Описание                                                        │
│ ┌─────────────────────────────────────────────────────────────┐│
│ │ Markdown поддерживается...                                  ││
│ │                                                             ││
│ │                                                             ││
│ └─────────────────────────────────────────────────────────────┘│
│                                                                 │
│ ┌─────────────────────┐  ┌─────────────────────┐               │
│ │ Проект              │  │ Спринт              │               │
│ │ [EKF Hub        ▼]  │  │ [Sprint 9       ▼]  │               │
│ └─────────────────────┘  └─────────────────────┘               │
│                                                                 │
│ ┌─────────────────────┐  ┌─────────────────────┐               │
│ │ Исполнитель         │  │ Приоритет           │               │
│ │ [Не назначен    ▼]  │  │ [Средний        ▼]  │               │
│ └─────────────────────┘  └─────────────────────┘               │
│                                                                 │
│ ┌─────────────────────┐  ┌─────────────────────┐               │
│ │ Story Points        │  │ Дедлайн             │               │
│ │ [—             ▼]   │  │ [📅 Выбрать]        │               │
│ └─────────────────────┘  └─────────────────────┘               │
│                                                                 │
│ Родительская задача (для Sub-task)                              │
│ ┌─────────────────────────────────────────────────────────────┐│
│ │ 🔍 Поиск задачи...                                          ││
│ └─────────────────────────────────────────────────────────────┘│
│                                                                 │
│                              [Отмена]  [Создать]               │
└─────────────────────────────────────────────────────────────────┘
```

## 1.5 Модель данных (расширенная)

```sql
-- Расширение таблицы tasks
ALTER TABLE tasks ADD COLUMN IF NOT EXISTS
    type VARCHAR(20) DEFAULT 'task' CHECK (type IN ('epic', 'story', 'task', 'bug', 'subtask')),
    reviewer_id UUID REFERENCES employees(id),
    tester_id UUID REFERENCES employees(id),
    original_estimate_hours FLOAT,
    remaining_estimate_hours FLOAT,
    environment VARCHAR(50),  -- для багов: production, staging, dev
    affected_version_id UUID REFERENCES versions(id),  -- версия где найден баг
    resolution VARCHAR(50),  -- fixed, wontfix, duplicate, cannot_reproduce
    resolution_date TIMESTAMPTZ;

-- Связи между задачами
CREATE TABLE IF NOT EXISTS task_links (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    source_task_id UUID NOT NULL REFERENCES tasks(id) ON DELETE CASCADE,
    target_task_id UUID NOT NULL REFERENCES tasks(id) ON DELETE CASCADE,
    link_type VARCHAR(30) NOT NULL,  -- blocks, is_blocked_by, relates_to, duplicates, is_duplicated_by, causes, is_caused_by
    created_at TIMESTAMPTZ DEFAULT NOW(),
    UNIQUE(source_task_id, target_task_id, link_type)
);

-- Вложения
CREATE TABLE IF NOT EXISTS task_attachments (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    task_id UUID NOT NULL REFERENCES tasks(id) ON DELETE CASCADE,
    filename VARCHAR(255) NOT NULL,
    file_path VARCHAR(500) NOT NULL,
    file_size INTEGER,
    mime_type VARCHAR(100),
    uploaded_by UUID REFERENCES employees(id),
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Наблюдатели задачи
CREATE TABLE IF NOT EXISTS task_watchers (
    task_id UUID REFERENCES tasks(id) ON DELETE CASCADE,
    employee_id UUID REFERENCES employees(id) ON DELETE CASCADE,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    PRIMARY KEY(task_id, employee_id)
);
```

---

# 2. Service Desk (ITIL)

## 2.1 Философия дизайна

**Принцип**: Простой интерфейс для пользователей, мощные инструменты для агентов поддержки.

**ITIL процессы**: Incident, Request, Problem, Change Management

## 2.2 Информационная архитектура

```
/service-desk
├── /portal          — Портал самообслуживания (для всех)
│   ├── Создать заявку
│   ├── Мои заявки
│   └── База знаний
│
├── /agent           — Интерфейс агента (для поддержки)
│   ├── Очередь заявок
│   ├── Мои заявки
│   ├── Дашборд SLA
│   └── Отчёты
│
└── /admin           — Администрирование
    ├── Категории услуг
    ├── SLA политики
    ├── Workflow
    └── Группы поддержки
```

## 2.3 User Portal

### 2.3.1 Главная страница портала

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ 🎫 SERVICE DESK                                          👤 Иванов И. ▼    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│                    Чем мы можем вам помочь?                                 │
│                                                                             │
│         ┌───────────────────────────────────────────────────────┐          │
│         │ 🔍 Опишите вашу проблему или найдите ответ...        │          │
│         └───────────────────────────────────────────────────────┘          │
│                                                                             │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐            │
│  │                 │  │                 │  │                 │            │
│  │    🖥️ IT        │  │    👥 HR        │  │    🏢 АХО       │            │
│  │                 │  │                 │  │                 │            │
│  │  Компьютеры,    │  │  Отпуска,       │  │  Пропуска,      │            │
│  │  ПО, доступы    │  │  справки,       │  │  рабочие места, │            │
│  │                 │  │  документы      │  │  канцтовары     │            │
│  │                 │  │                 │  │                 │            │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘            │
│                                                                             │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐            │
│  │                 │  │                 │  │                 │            │
│  │   💰 Финансы    │  │   📞 Связь      │  │   🔧 Прочее     │            │
│  │                 │  │                 │  │                 │            │
│  │  Командировки,  │  │  Телефония,     │  │  Другие         │            │
│  │  согласования   │  │  почта          │  │  вопросы        │            │
│  │                 │  │                 │  │                 │            │
│  └─────────────────┘  └─────────────────┘  └─────────────────┘            │
│                                                                             │
│ ─────────────────────────────────────────────────────────────────────────  │
│                                                                             │
│  📋 МОИ ЗАЯВКИ                                           [Все заявки →]   │
│                                                                             │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │ 🔴 INC-001  Не работает принтер          В работе    2ч назад        │ │
│  │ 🟡 REQ-042  Запрос доступа к 1С          Ожидает     5ч назад        │ │
│  │ 🟢 INC-038  Проблема с VPN               Решено      вчера           │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│  📚 ПОПУЛЯРНЫЕ СТАТЬИ                                                      │
│                                                                             │
│  • Как подключиться к VPN                                                  │
│  • Настройка корпоративной почты                                           │
│  • Заявка на отпуск                                                        │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 2.3.2 Форма создания заявки

```
┌─────────────────────────────────────────────────────────────────┐
│ ← Назад                            Новая заявка                │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Категория: 🖥️ IT                                              │
│                                                                 │
│  Подкатегория *                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ Выберите подкатегорию...                            ▼   │   │
│  ├─────────────────────────────────────────────────────────┤   │
│  │ 🖨️ Принтеры и сканеры                                   │   │
│  │ 💻 Рабочие станции                                      │   │
│  │ 🔐 Доступы и учётные записи                             │   │
│  │ 📧 Электронная почта                                    │   │
│  │ 🌐 Интернет и VPN                                       │   │
│  │ 📱 Мобильные устройства                                 │   │
│  │ 💿 Программное обеспечение                              │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  Краткое описание *                                             │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ Не могу распечатать документ                            │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  Подробное описание                                             │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ При отправке на печать принтер HP LaserJet на 3 этаже   │   │
│  │ показывает ошибку "Paper jam", хотя бумага не застряла. │   │
│  │ Пробовал перезагрузить - не помогло.                    │   │
│  │                                                         │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  Влияние на работу *                                            │
│  ○ 🔴 Критично — не могу работать                              │
│  ● 🟡 Значительно — работа затруднена                          │
│  ○ 🟢 Незначительно — есть обходной путь                       │
│                                                                 │
│  Вложения                                                       │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │ 📎 Перетащите файлы или нажмите для выбора              │   │
│  │    Скриншоты помогут быстрее решить проблему            │   │
│  └─────────────────────────────────────────────────────────┘   │
│  📷 screenshot.png (125 KB)  [✕]                               │
│                                                                 │
│                                                                 │
│                              [Отмена]  [Отправить заявку]      │
└─────────────────────────────────────────────────────────────────┘
```

## 2.4 Agent Interface

### 2.4.1 Очередь заявок

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ SERVICE DESK — Агент                                    👤 Техподдержка ▼  │
├───────────┬─────────────────────────────────────────────────────────────────┤
│           │                                                                 │
│  НАВИГАЦИЯ│  ОЧЕРЕДЬ ЗАЯВОК                                                │
│           │                                                                 │
│  📥 Очередь│  ┌─ Фильтры ────────────────────────────────────────────────┐ │
│     (15)  │  │ [Все ▼] [Все приоритеты ▼] [Все категории ▼] [🔍 Поиск] │ │
│  👤 Мои   │  └──────────────────────────────────────────────────────────┘ │
│     (3)   │                                                                 │
│  ⏰ SLA   │  ┌───────────────────────────────────────────────────────────┐ │
│     (2)   │  │ № ▼      │ Тема        │ Автор    │ SLA      │ Статус   │ │
│           │  ├──────────┼─────────────┼──────────┼──────────┼──────────┤ │
│  ─────────│  │🔴INC-001 │ Не работает │ Иванов   │ ⚠️ 30м   │ В работе │ │
│           │  │          │ сервер 1С   │          │          │          │ │
│  📊 Отчёты│  ├──────────┼─────────────┼──────────┼──────────┼──────────┤ │
│           │  │🟡REQ-042 │ Доступ к    │ Петрова  │ ✅ 4ч    │ Новая    │ │
│  📚 База  │  │          │ папке отдела│          │          │          │ │
│  знаний   │  ├──────────┼─────────────┼──────────┼──────────┼──────────┤ │
│           │  │🟡INC-039 │ Outlook не  │ Сидоров  │ ✅ 2ч    │ Новая    │ │
│  ⚙️ Настр.│  │          │ синхронизир.│          │          │          │ │
│           │  └──────────┴─────────────┴──────────┴──────────┴──────────┘ │
│           │                                                                 │
│           │                                                 [1] 2 3 ... 5  │
└───────────┴─────────────────────────────────────────────────────────────────┘
```

### 2.4.2 Карточка заявки (для агента)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ ← К списку                     INC-001                    [⋮ Действия ▼]   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─ SLA ────────────────────────────────────────────────────────────────┐  │
│  │  ⏱️ Время реакции: ✅ 15м / 30м          Осталось: —                 │  │
│  │  ⏱️ Время решения: ⚠️ 1ч 45м / 2ч        Осталось: 15м              │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  🔴 ИНЦИДЕНТ • Критический                                                 │
│                                                                             │
│  ┌─────────────────────────────────────────────────────────────────────┐   │
│  │ Не работает сервер 1С — бухгалтерия не может работать               │   │
│  └─────────────────────────────────────────────────────────────────────┘   │
│                                                                             │
│ ┌────────────────────────────────┐  ┌────────────────────────────────────┐ │
│ │ ИНФОРМАЦИЯ                     │  │ ДЕЙСТВИЯ                           │ │
│ │                                │  │                                    │ │
│ │ Автор:     👤 Иванов И.        │  │ Статус:                            │ │
│ │ Создано:   10:05 сегодня       │  │ [🟡 В работе           ▼]          │ │
│ │ Телефон:   +7 999 123-45-67    │  │                                    │ │
│ │                                │  │ Назначен:                          │ │
│ │ Категория: 💻 IT > Серверы     │  │ [👤 Админ Сервисов    ▼]          │ │
│ │ Влияние:   🔴 Высокое          │  │                                    │ │
│ │ Срочность: 🔴 Высокая          │  │ Приоритет:                         │ │
│ │                                │  │ [🔴 Критический       ▼]          │ │
│ │ Затронуто:                     │  │                                    │ │
│ │ • Сервер 1C-PROD-01            │  │ [Взять в работу]                   │ │
│ │ • 25 пользователей             │  │ [Эскалировать]                     │ │
│ │                                │  │ [Связать с Problem]                │ │
│ └────────────────────────────────┘  └────────────────────────────────────┘ │
│                                                                             │
│  ┌─ Описание ───────────────────────────────────────────────────────────┐  │
│  │ С 10:00 сервер 1С недоступен. Сотрудники бухгалтерии не могут       │  │
│  │ выполнять операции. Ошибка: "Сервер 1С:Предприятие не отвечает".    │  │
│  │                                                                      │  │
│  │ 📷 screenshot.png                                                    │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  ┌─ Работа над заявкой ─────────────────────────────────────────────────┐  │
│  │                                                                      │  │
│  │ 10:05  📝 Заявка создана                          Иванов И.          │  │
│  │ 10:12  👤 Назначена на Техподдержка               Система            │  │
│  │ 10:15  🔄 Статус изменён: В работе                Админ Сервисов     │  │
│  │ 10:20  💬 Проверяю доступность сервера            Админ Сервисов     │  │
│  │ 10:35  💬 Обнаружена проблема с диском.           Админ Сервисов     │  │
│  │            Выполняю перезагрузку службы.                             │  │
│  │                                                                      │  │
│  │ ┌────────────────────────────────────────────────────────────────┐  │  │
│  │ │ Добавить комментарий...                                        │  │  │
│  │ │                                                                │  │  │
│  │ │ ☐ Внутренний (не виден автору)           [Отправить]          │  │  │
│  │ └────────────────────────────────────────────────────────────────┘  │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  ┌─ Решение ────────────────────────────────────────────────────────────┐  │
│  │                                                                      │  │
│  │ Категория решения: [Перезапуск службы          ▼]                   │  │
│  │                                                                      │  │
│  │ Описание решения:                                                    │  │
│  │ ┌────────────────────────────────────────────────────────────────┐  │  │
│  │ │                                                                │  │  │
│  │ └────────────────────────────────────────────────────────────────┘  │  │
│  │                                                                      │  │
│  │ ☐ Добавить в базу знаний                                            │  │
│  │                                                                      │  │
│  │                                          [Решить заявку]            │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## 2.5 Модель данных Service Desk

```sql
-- Категории услуг
CREATE TABLE IF NOT EXISTS sd_categories (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    parent_id UUID REFERENCES sd_categories(id),
    name VARCHAR(100) NOT NULL,
    description TEXT,
    icon VARCHAR(50),
    default_sla_id UUID,
    default_group_id UUID,
    is_active BOOLEAN DEFAULT true,
    sort_order INT DEFAULT 0
);

-- Заявки
CREATE TABLE IF NOT EXISTS sd_tickets (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    number VARCHAR(20) UNIQUE NOT NULL,  -- INC-001, REQ-042
    type VARCHAR(20) NOT NULL CHECK (type IN ('incident', 'request', 'problem', 'change')),

    -- Основные поля
    subject VARCHAR(255) NOT NULL,
    description TEXT,

    -- Классификация
    category_id UUID REFERENCES sd_categories(id),
    impact VARCHAR(20) CHECK (impact IN ('high', 'medium', 'low')),
    urgency VARCHAR(20) CHECK (urgency IN ('high', 'medium', 'low')),
    priority VARCHAR(20) CHECK (priority IN ('critical', 'high', 'medium', 'low')),

    -- Статус
    status VARCHAR(30) NOT NULL DEFAULT 'new'
        CHECK (status IN ('new', 'assigned', 'in_progress', 'pending', 'resolved', 'closed', 'cancelled')),

    -- Участники
    reporter_id UUID NOT NULL REFERENCES employees(id),
    assignee_id UUID REFERENCES employees(id),
    assignment_group_id UUID REFERENCES sd_groups(id),

    -- SLA
    sla_id UUID REFERENCES sd_sla_definitions(id),
    response_due TIMESTAMPTZ,
    resolution_due TIMESTAMPTZ,
    responded_at TIMESTAMPTZ,
    resolved_at TIMESTAMPTZ,
    sla_breached BOOLEAN DEFAULT false,

    -- Решение
    resolution_category VARCHAR(100),
    resolution_description TEXT,

    -- Связи
    parent_ticket_id UUID REFERENCES sd_tickets(id),  -- для problem -> incidents

    -- Метаданные
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- SLA определения
CREATE TABLE IF NOT EXISTS sd_sla_definitions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(100) NOT NULL,
    priority VARCHAR(20) NOT NULL,
    response_time_minutes INT NOT NULL,
    resolution_time_minutes INT NOT NULL,
    business_hours_only BOOLEAN DEFAULT true,
    is_active BOOLEAN DEFAULT true
);

-- Группы поддержки
CREATE TABLE IF NOT EXISTS sd_groups (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(100) NOT NULL,
    description TEXT,
    email VARCHAR(255),
    manager_id UUID REFERENCES employees(id),
    is_active BOOLEAN DEFAULT true
);

-- Участники групп
CREATE TABLE IF NOT EXISTS sd_group_members (
    group_id UUID REFERENCES sd_groups(id) ON DELETE CASCADE,
    employee_id UUID REFERENCES employees(id) ON DELETE CASCADE,
    is_default_assignee BOOLEAN DEFAULT false,
    PRIMARY KEY (group_id, employee_id)
);

-- История заявок
CREATE TABLE IF NOT EXISTS sd_ticket_history (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    ticket_id UUID NOT NULL REFERENCES sd_tickets(id) ON DELETE CASCADE,
    field_name VARCHAR(50),
    old_value TEXT,
    new_value TEXT,
    comment TEXT,
    is_internal BOOLEAN DEFAULT false,  -- внутренний комментарий
    created_by UUID REFERENCES employees(id),
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- База знаний
CREATE TABLE IF NOT EXISTS sd_knowledge_articles (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    title VARCHAR(255) NOT NULL,
    content TEXT NOT NULL,
    category_id UUID REFERENCES sd_categories(id),
    keywords TEXT[],
    view_count INT DEFAULT 0,
    helpful_count INT DEFAULT 0,
    not_helpful_count INT DEFAULT 0,
    status VARCHAR(20) DEFAULT 'draft' CHECK (status IN ('draft', 'published', 'archived')),
    created_by UUID REFERENCES employees(id),
    published_at TIMESTAMPTZ,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

---

# 3. Встречи (Meetings)

## 3.1 Философия дизайна

**Принцип**: Встречи — это не просто события в календаре, а инструмент продуктивности с подготовкой, проведением и follow-up.

## 3.2 Информационная архитектура

```
/meetings
├── Calendar View (по умолчанию)
├── List View
├── Meeting Detail
│   ├── Информация
│   ├── Участники
│   ├── Скрипт/Повестка
│   ├── Записи и транскрипции
│   └── Задачи из встречи
└── Analysis Workflow
```

## 3.3 Компоненты UI

### 3.3.1 Главная страница встреч

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ ВСТРЕЧИ                                                                     │
│                                                                             │
│ [+ Создать встречу]  [📅 Синхр. Exchange]              [Calendar | List]   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ◀ Январь 2026 ▶                                                           │
│                                                                             │
│  ┌─────┬─────┬─────┬─────┬─────┬─────┬─────┐                              │
│  │ Пн  │ Вт  │ Ср  │ Чт  │ Пт  │ Сб  │ Вс  │                              │
│  ├─────┼─────┼─────┼─────┼─────┼─────┼─────┤                              │
│  │     │     │  1  │  2  │  3  │  4  │  5  │                              │
│  │     │     │     │     │     │     │     │                              │
│  ├─────┼─────┼─────┼─────┼─────┼─────┼─────┤                              │
│  │  6  │  7  │  8  │  9  │ 10  │ 11  │ 12  │                              │
│  │     │     │     │     │     │     │     │                              │
│  ├─────┼─────┼─────┼─────┼─────┼─────┼─────┤                              │
│  │ 13  │ 14  │ 15  │ 16  │ 17  │ 18  │ 19  │                              │
│  │     │     │     │     │     │     │     │                              │
│  ├─────┼─────┼─────┼─────┼─────┼─────┼─────┤                              │
│  │ 20  │ 21  │ 22  │ 23  │ 24  │ 25  │ 26  │                              │
│  │09:30│     │     │     │     │     │     │                              │
│  │1-1  │     │     │     │     │     │     │                              │
│  │🎤📝 │     │     │     │     │     │     │                              │
│  ├─────┼─────┼─────┼─────┼─────┼─────┼─────┤                              │
│  │ 27  │ 28  │ 29  │ 30  │ 31  │     │     │                              │
│  │     │10:00│     │     │     │     │     │                              │
│  │     │Sprint│     │     │     │     │     │                              │
│  │     │Review│     │     │     │     │     │                              │
│  └─────┴─────┴─────┴─────┴─────┴─────┴─────┘                              │
│                                                                             │
│  Легенда: 🎤 Есть запись  📝 Есть скрипт  ⚠️ Требует анализа  ✅ Обработано│
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.3.2 Детали встречи с участниками

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ ← Назад                                                            [⋮ Ещё] │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  1-on-1 с Ивановым                                                         │
│                                                                             │
│  📅 20 января 2026, Пн                                                     │
│  🕐 09:30 — 10:30 (1 час)                                                  │
│  📍 Переговорная "Альфа" • Zoom: https://zoom.us/j/123456                  │
│                                                                             │
│  ┌─ УЧАСТНИКИ ──────────────────────────────────────────────────────────┐  │
│  │                                                                      │  │
│  │  ┌──────┐                         ┌──────┐                          │  │
│  │  │      │  Пётр Петров            │      │  Иван Иванов             │  │
│  │  │  👤  │  Team Lead              │  👤  │  Senior Developer        │  │
│  │  │      │  📧 p.petrov@ekf.ru     │      │  📧 i.ivanov@ekf.ru      │  │
│  │  └──────┘  📱 +7 999 111-22-33    └──────┘  📱 +7 999 444-55-66     │  │
│  │           ✅ Организатор                    ✅ Принял                │  │
│  │                                                                      │  │
│  │  ┌──────┐                                                           │  │
│  │  │      │  + Добавить участника                                     │  │
│  │  │  ➕  │  [🔍 Найти сотрудника...]                                 │  │
│  │  │      │                                                           │  │
│  │  └──────┘                                                           │  │
│  │                                                                      │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  [📋 Скрипт] [🎤 Запись] [📝 Заметки] [✅ Задачи]                          │
│  ─────────────────────────────────────────────────────────────────────────  │
│                                                                             │
│  ┌─ СКРИПТ ВСТРЕЧИ ─────────────────────────────────────────────────────┐  │
│  │                                                                      │  │
│  │  Шаблон: [1-on-1 ▼]                              [✏️ Редактировать]  │  │
│  │                                                                      │  │
│  │  ┌────────────────────────────────────────────────────────────────┐ │  │
│  │  │ 1. Как дела? Что нового?                            [5 мин]   │ │  │
│  │  │    □ Личное самочувствие                                      │ │  │
│  │  │    □ Рабочая нагрузка                                         │ │  │
│  │  ├────────────────────────────────────────────────────────────────┤ │  │
│  │  │ 2. Прогресс по задачам                             [15 мин]   │ │  │
│  │  │    □ Обзор текущих задач                                      │ │  │
│  │  │    □ Что завершено с прошлой встречи                          │ │  │
│  │  ├────────────────────────────────────────────────────────────────┤ │  │
│  │  │ 3. Блокеры и проблемы                              [10 мин]   │ │  │
│  │  │    □ Технические блокеры                                      │ │  │
│  │  │    □ Организационные вопросы                                  │ │  │
│  │  ├────────────────────────────────────────────────────────────────┤ │  │
│  │  │ 4. Обратная связь и развитие                       [10 мин]   │ │  │
│  │  │    □ Обратная связь от менеджера                              │ │  │
│  │  │    □ Обратная связь от сотрудника                             │ │  │
│  │  ├────────────────────────────────────────────────────────────────┤ │  │
│  │  │ 5. План на следующий период                        [10 мин]   │ │  │
│  │  │    □ Приоритеты                                               │ │  │
│  │  │    □ Цели и ожидания                                          │ │  │
│  │  └────────────────────────────────────────────────────────────────┘ │  │
│  │                                                                      │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  ┌─ ЗАПИСЬ И АНАЛИЗ ────────────────────────────────────────────────────┐  │
│  │                                                                      │  │
│  │  🎤 Запись: meeting_2026-01-20_1on1.mp3                             │  │
│  │     Длительность: 52 минуты                                         │  │
│  │     Загружено: 20 января 2026, 11:15                                │  │
│  │                                                                      │  │
│  │  [▶️ Воспроизвести]  [📝 Транскрипция]  [🤖 AI Анализ]              │  │
│  │                                                                      │  │
│  │  ─────────────────────────────────────────────────────────────────  │  │
│  │                                                                      │  │
│  │  📊 Статус анализа: ✅ Завершён                                     │  │
│  │                                                                      │  │
│  │  • Транскрипция: готова (4,521 слов)                                │  │
│  │  • Краткое содержание: готово                                       │  │
│  │  • Извлечённые задачи: 4                                            │  │
│  │  • Настроение: 😊 Позитивное (8/10)                                 │  │
│  │                                                                      │  │
│  │  [Открыть результаты анализа]                                       │  │
│  │                                                                      │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│                        [Редактировать]  [Удалить]                          │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.3.3 Workflow анализа встречи

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ АНАЛИЗ ВСТРЕЧИ                                                      [✕]    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  ┌─ Шаги ───────────────────────────────────────────────────────────────┐  │
│  │  ●───────────●───────────●───────────○                               │  │
│  │  Загрузка    Транскрипция   Анализ    Результаты                     │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│  ШАГ 3: AI АНАЛИЗ                                                          │
│                                                                             │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │                                                                      │  │
│  │  🤖 Анализирую содержание встречи...                                │  │
│  │                                                                      │  │
│  │  ████████████████████████████░░░░░░  75%                            │  │
│  │                                                                      │  │
│  │  ✅ Определение спикеров: завершено                                 │  │
│  │  ✅ Выделение тем: завершено                                        │  │
│  │  🔄 Извлечение задач: в процессе...                                 │  │
│  │  ⏳ Анализ настроения: ожидает                                      │  │
│  │  ⏳ Формирование summary: ожидает                                   │  │
│  │                                                                      │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│                                                          [Отмена]          │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3.3.4 Результаты анализа с workflow создания задач

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ РЕЗУЛЬТАТЫ АНАЛИЗА: 1-on-1 с Ивановым                               [✕]    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│  [Транскрипция] [Содержание] [Задачи] [Настроение]                         │
│  ═══════════════════════════════════════════════════════════════════════   │
│                                                                             │
│  ┌─ ЗАДАЧИ (извлечено AI) ──────────────────────────────────────────────┐  │
│  │                                                                      │  │
│  │  Найдено задач: 4           Выбрано для создания: 3                 │  │
│  │                                                                      │  │
│  │  ┌────────────────────────────────────────────────────────────────┐ │  │
│  │  │ ☑ Завершить рефакторинг модуля авторизации                    │ │  │
│  │  │                                                                │ │  │
│  │  │   Исполнитель: [👤 Иванов И.    ▼]                            │ │  │
│  │  │   Дедлайн:     [📅 25.01.2026]                                │ │  │
│  │  │   Проект:      [📁 EKF Hub      ▼]                            │ │  │
│  │  │   Приоритет:   [🟡 Средний     ▼]                             │ │  │
│  │  │                                                                │ │  │
│  │  │   Контекст из встречи:                                        │ │  │
│  │  │   "...нужно завершить рефакторинг до конца недели,            │ │  │
│  │  │   чтобы успеть к релизу v2.1..."                              │ │  │
│  │  │                                                    [✏️ Ред.]  │ │  │
│  │  └────────────────────────────────────────────────────────────────┘ │  │
│  │                                                                      │  │
│  │  ┌────────────────────────────────────────────────────────────────┐ │  │
│  │  │ ☑ Организовать созвон с админами по интеграции LDAP           │ │  │
│  │  │                                                                │ │  │
│  │  │   Исполнитель: [👤 Петров П.    ▼]                            │ │  │
│  │  │   Дедлайн:     [📅 22.01.2026]                                │ │  │
│  │  │   ...                                                         │ │  │
│  │  └────────────────────────────────────────────────────────────────┘ │  │
│  │                                                                      │  │
│  │  ┌────────────────────────────────────────────────────────────────┐ │  │
│  │  │ ☐ Исследовать проблему производительности Dashboard           │ │  │
│  │  │   (пропущено — не срочно)                                     │ │  │
│  │  └────────────────────────────────────────────────────────────────┘ │  │
│  │                                                                      │  │
│  │  ┌────────────────────────────────────────────────────────────────┐ │  │
│  │  │ ☑ Подготовить демо новых функций для заказчика                │ │  │
│  │  │   ...                                                         │ │  │
│  │  └────────────────────────────────────────────────────────────────┘ │  │
│  │                                                                      │  │
│  │  [+ Добавить задачу вручную]                                        │  │
│  │                                                                      │  │
│  │                    [Создать выбранные задачи (3)]                   │  │
│  │                                                                      │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                             │
│                              [Сохранить]  [Закрыть]                        │
└─────────────────────────────────────────────────────────────────────────────┘
```

## 3.4 Модель данных встреч (расширенная)

```sql
-- Расширение meetings
ALTER TABLE meetings ADD COLUMN IF NOT EXISTS
    script_template_id UUID REFERENCES meeting_script_templates(id),
    script_data JSONB,  -- заполненный скрипт
    recording_file_path VARCHAR(500),
    recording_duration_seconds INT,
    analysis_status VARCHAR(30) DEFAULT 'none'
        CHECK (analysis_status IN ('none', 'pending', 'transcribing', 'analyzing', 'completed', 'failed')),
    analysis_completed_at TIMESTAMPTZ;

-- Шаблоны скриптов
CREATE TABLE IF NOT EXISTS meeting_script_templates (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(100) NOT NULL,
    description TEXT,
    structure JSONB NOT NULL,  -- [{section, title, duration_minutes, checkpoints: [...]}]
    category_id UUID REFERENCES meeting_categories(id),
    is_default BOOLEAN DEFAULT false,
    created_by UUID REFERENCES employees(id),
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Участники встречи (расширение)
ALTER TABLE meeting_participants ADD COLUMN IF NOT EXISTS
    response_status VARCHAR(20) DEFAULT 'pending'
        CHECK (response_status IN ('pending', 'accepted', 'declined', 'tentative')),
    is_optional BOOLEAN DEFAULT false,
    attended BOOLEAN;

-- Результаты анализа
CREATE TABLE IF NOT EXISTS meeting_analysis_results (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    meeting_id UUID NOT NULL REFERENCES meetings(id) ON DELETE CASCADE,

    -- Транскрипция
    transcript_whisper TEXT,
    transcript_yandex TEXT,
    transcript_merged TEXT,
    speaker_diarization JSONB,  -- [{speaker_id, name, segments: [{start, end, text}]}]

    -- AI анализ
    summary TEXT,
    key_topics JSONB,  -- [{topic, mentions_count, sentiment}]
    action_items JSONB,  -- [{text, assignee_suggestion, deadline_suggestion, confidence}]
    decisions JSONB,  -- [{decision, context}]
    mood_score INT CHECK (mood_score BETWEEN 1 AND 10),
    mood_analysis TEXT,

    -- Метаданные
    ai_model VARCHAR(50),
    processing_time_seconds INT,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Задачи из встречи (связь)
ALTER TABLE tasks ADD COLUMN IF NOT EXISTS
    source_meeting_id UUID REFERENCES meetings(id),
    source_analysis_item_index INT;  -- индекс в action_items
```

---

# 4. Навигация

## 4.1 Новая структура Sidebar

```
┌───────────────────┐
│  ┌─────┐          │
│  │ EKF │  Hub     │
│  └─────┘          │
├───────────────────┤
│                   │
│  📊 Дашборд       │
│                   │
│  ─────────────────│
│  РАБОТА           │
│  ─────────────────│
│  📋 Задачи        │  ← Объединяет проекты, спринты, релизы
│  📅 Встречи       │  ← Объединяет календарь
│  🎫 Service Desk  │  ← Новое
│                   │
│  ─────────────────│
│  КОММУНИКАЦИИ     │
│  ─────────────────│
│  💬 Сообщения     │
│  ✉️ Почта         │
│                   │
│  ─────────────────│
│  РЕСУРСЫ          │
│  ─────────────────│
│  👥 Сотрудники    │
│  📚 Confluence    │
│  📊 Аналитика     │
│                   │
│  ─────────────────│
│  ⚙️ Настройки     │
│                   │
└───────────────────┘
```

---

# Следующие шаги

1. **Утверждение концепции** — обсудить с заказчиком
2. **Детальное ТЗ** — спецификация API endpoints
3. **Прототипы в Figma** — интерактивные макеты
4. **Разбивка на спринты** — план реализации

---

*Документ создан: 23 января 2026*
*Автор: AI Analyst*
